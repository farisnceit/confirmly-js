{"version":3,"file":"confirmly-popup.umd.js","sources":["../src/confirmlyPopup.ts"],"sourcesContent":["import Popper from '@popperjs/core';\n\nimport { PopperOptions } from './constants'\n\nexport class confirmPopup {\n  private popperInstance: any = null;\n  private template: string;\n  private buttonClasses: { confirm: string; cancel: string };\n  private buttonContents: { confirm: string; cancel: string };\n  private defaultPlacement: Popper.Placement;\n  private popperElement: HTMLElement;\n  private onConfirmCallback?: () => void;\n  private onCancelCallback?: () => void;\n  private showError: boolean;\n\n  constructor({\n    template,\n    buttonClasses,\n    buttonContents,\n    defaultPlacement,\n    targetElement,\n    onConfirm,\n    onCancel,\n    showError = true,\n  }: PopperOptions) {\n    this.template = template || this.defaultTemplate();\n    this.buttonClasses = buttonClasses || {\n      confirm: 'confirm-btn',\n      cancel: 'cancel-btn',\n    };\n    this.buttonContents = buttonContents || { confirm: 'Yes', cancel: 'No' };\n    this.defaultPlacement = defaultPlacement || 'top';\n    this.showError = showError;\n\n    this.popperElement = this.createPopperElement();\n    document.body.appendChild(this.popperElement);\n\n    this.attach(targetElement, onConfirm, onCancel);\n  }\n\n  private defaultTemplate(): string {\n    return `\n      <div class=\"confirmation-content\">\n        <p>Are you sure?</p>\n        <div class=\"arrow\" data-popper-arrow></div>\n        <button class=\"{{confirmClass}}\" data-button=\"confirm\">{{confirmContent}}</button>\n        <button class=\"{{cancelClass}}\" data-button=\"cancel\">{{cancelContent}}</button>\n      </div>\n    `;\n  }\n\n  private createPopperElement(): HTMLElement {\n    const popperDiv = document.createElement('div');\n    popperDiv.className = 'confirmation-popper';\n    popperDiv.style.display = 'none';\n    popperDiv.style.position = 'absolute';\n\n    const template = this.template\n      .replace('{{confirmClass}}', this.buttonClasses.confirm)\n      .replace('{{cancelClass}}', this.buttonClasses.cancel)\n      .replace('{{confirmContent}}', this.buttonContents.confirm)\n      .replace('{{cancelContent}}', this.buttonContents.cancel);\n\n    popperDiv.innerHTML = template;\n\n    // Ensure event listeners are added dynamically after template insertion\n    this.attachButtonListeners(popperDiv);\n\n    return popperDiv;\n  }\n\n  private attachButtonListeners(popperDiv: HTMLElement): void {\n    const confirmButton = popperDiv.querySelector('[data-button=\"confirm\"]');\n    const cancelButton = popperDiv.querySelector('[data-button=\"cancel\"]');\n\n    if (confirmButton) {\n      confirmButton.addEventListener('click', () => {\n        this.handleConfirm();\n      });\n    }\n\n    if (cancelButton) {\n      cancelButton.addEventListener('click', () => {\n        this.handleCancel();\n      });\n    }\n  }\n\n  public attach(\n    element: HTMLElement,\n    onConfirm?: () => void,\n    onCancel?: () => void,\n  ): void {\n    if (!!element && this.showError) {\n      console.error('Target Element is not Defined');\n    }\n\n    element?.addEventListener('click', (event) => {\n      event.stopPropagation();\n      this.showPopper(element, onConfirm, onCancel);\n    });\n\n    document.addEventListener('click', (event) => {\n      if (!this.popperElement.contains(event.target as Node)) {\n        this.hidePopper();\n      }\n    });\n  }\n\n  private showPopper(\n    targetElement: HTMLElement,\n    onConfirm?: () => void,\n    onCancel?: () => void,\n  ) {\n    this.onConfirmCallback = onConfirm;\n    this.onCancelCallback = onCancel;\n\n    this.popperElement.style.display = 'block';\n\n    if (this.popperInstance) {\n      this.popperInstance.destroy();\n    }\n\n    if (!!targetElement && this.showError) {\n      console.error('Target Element is not Defined');\n    }\n\n    this.popperInstance = Popper.createPopper(\n      targetElement,\n      this.popperElement,\n      {\n        placement: this.defaultPlacement,\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 8],\n            },\n          },\n          {\n            name: 'arrow',\n            options: {\n              element: '[data-popper-arrow]',\n            },\n          },\n        ],\n      },\n    );\n  }\n\n  private hidePopper() {\n    if (this.popperInstance) {\n      this.popperInstance.destroy();\n      this.popperInstance = null;\n    }\n    this.popperElement.style.display = 'none';\n  }\n\n  private handleConfirm() {\n    if (this.onConfirmCallback) {\n      this.onConfirmCallback();\n    }\n    this.hidePopper();\n  }\n\n  private handleCancel() {\n    if (this.onCancelCallback) {\n      this.onCancelCallback();\n    }\n    this.hidePopper();\n  }\n}\n"],"names":["confirmPopup","_ref","template","buttonClasses","buttonContents","defaultPlacement","targetElement","onConfirm","onCancel","_ref$showError","showError","_classCallCheck","_defineProperty","defaultTemplate","confirm","cancel","popperElement","createPopperElement","document","body","appendChild","attach","_createClass","key","value","popperDiv","createElement","className","style","display","position","replace","innerHTML","attachButtonListeners","_this","confirmButton","querySelector","cancelButton","addEventListener","handleConfirm","handleCancel","element","_this2","console","error","event","stopPropagation","showPopper","contains","target","hidePopper","onConfirmCallback","onCancelCallback","popperInstance","destroy","Popper","createPopper","placement","modifiers","name","options","offset"],"mappings":"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"}